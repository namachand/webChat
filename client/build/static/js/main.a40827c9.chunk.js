(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,n){},106:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),l=n(54),c=n.n(l),i=(n(66),n(7)),s=n(8),r=n(11),d=n(10),m=n(12),u=(n(67),n(18)),p=n(19),g=n(16),h=n(3),v=n(21),f=n.n(v),b=(n(25),n(26)),y=n.n(b),E=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(r.a)(this,Object(d.a)(t).call(this,e))).leaveRoom=n.leaveRoom.bind(Object(h.a)(n)),n.searchforStranger=n.searchforStranger.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"leaveRoom",value:function(){var e=this.props.sex;(document.getElementById("comment").setAttribute("disabled",!0),document.getElementById("btn1").setAttribute("disabled",!0),document.getElementById("leave").setAttribute("disabled",!0),"public"!=e)&&document.getElementById("video").setAttribute("disabled",!0);document.getElementById("search").removeAttribute("disabled",!0);var t=document.getElementById("mainMess"),n=document.getElementById("strangerDisconnect"),a=document.createElement("div");a.setAttribute("id","disconnectTextWarn");var o=document.createElement("P");o.innerText="You are disconnected!",a.style.display="flex",a.style.justifyContent="center",o.style.fontSize="x-large",o.style.color="white",o.style.textShadow="2px 2px 4px #000000",a.appendChild(o),n.appendChild(a),t.appendChild(n),console.log("inside leave room");var l=this.props.socket,c=this.props.room,i=this.props.opponent;l.emit("leaveroom",{room:c,opponent:i})}},{key:"searchforStranger",value:function(){document.getElementById("search").setAttribute("disabled",!0),document.getElementById("disconnectTextWarn").remove();var e=document.getElementById("mainMess"),t=document.getElementById("scrollable");t.innerHTML="";var n=document.createElement("div");n.setAttribute("id","forImage");var a=document.createElement("img");a.src=y.a,n.style.display="flex",n.style.marginTop="20%",n.style.justifyContent="center",a.style.height="200px",a.style.width="200px",a.style.opacity="0.8",n.appendChild(a),t.appendChild(n);var o=document.createElement("div");o.setAttribute("id","connecting");var l=document.createElement("P");l.setAttribute("id","connectText"),l.innerText="Connecting to Stranger..",o.style.display="flex",l.style.marginBottom="100px",o.style.justifyContent="center",l.style.fontSize="x-large",l.style.color="white",l.style.fontStyle="italic",l.style.textShadow="2px 2px 4px #000000",o.appendChild(l),e.appendChild(o);var c=this.props.socket,i=this.props.socketid,s=this.props.sex;c.emit("mydetails",{socketid:i,sex:s})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:" container row "},o.a.createElement("div",{className:"col-2 col-md-1",id:"parent"},o.a.createElement("button",{type:"button",className:" btn-action fa fa-times fa-2x ml-3 font",id:"leave",onClick:function(){e.leaveRoom(),e.props.endCall(!0)}})),o.a.createElement("div",{className:"col-3 offset-1 col-md-1"},o.a.createElement("button",{type:"button",className:"btn-action fa fa-play fa-2x ml-5 pl-2 font",id:"search",onClick:this.searchforStranger})),o.a.createElement("div",{className:"col-5 col-md-5"}))}}]),t}(o.a.Component),k=n(107),x=n(108),w=n(109),C=n(110),j=n(111),N=n(112),S=n(113),I=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(r.a)(this,Object(d.a)(t).call(this,e))).SendMessage=n.SendMessage.bind(Object(h.a)(n)),n.handlePress=n.handlePress.bind(Object(h.a)(n)),n.handleEnter=n.handleEnter.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"SendMessage",value:function(e){var t=this.props.socket,n=this.props.opponent;e.preventDefault();var a=document.getElementById("comment"),o=a.value;console.log(o),t.emit("messages",{message:o,opponent:n}),a.value=""}},{key:"handlePress",value:function(e){var t=this.props.socket;e.preventDefault();t.emit("typing","stranger is typing...")}},{key:"handleEnter",value:function(e){if(13===e.which){var t=this.props.socket,n=this.props.opponent;e.preventDefault();var a=document.getElementById("comment"),o=a.value;return console.log(o),""!=a.value&&t.emit("messages",{message:o,opponent:n}),a.value="",!1}}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{id:"containMessageBox",className:"row "},o.a.createElement("div",{className:"col-md-12 mainMessage",id:"mainMess"},o.a.createElement("div",{id:"scrollable",className:"ml-3"},o.a.createElement("div",{id:"forImage"},o.a.createElement("img",{src:y.a,id:"image"}))),o.a.createElement("div",{id:"strangerDisconnect"}),o.a.createElement("div",{id:"connecting"},o.a.createElement("p",{id:"connectText"},"Connecting to the stranger...")),o.a.createElement("div",{id:"feedback"})),o.a.createElement(k.a,{className:"col-md-12 ",id:"cardFoot",style:{height:"11vh",backgroundColor:"rgb(240,240,240)",boxShadow:"0px 1px 1px grey"}},o.a.createElement("div",{className:"col-md-12"},o.a.createElement(x.a,{onSubmit:this.SendMessage},o.a.createElement(w.a,null,o.a.createElement(C.a,{xs:"9",md:"11"},o.a.createElement(j.a,null,o.a.createElement(N.a,{type:"textarea",name:"textarea",id:"comment",onInput:this.handlePress,onKeyDown:this.handleEnter}))),o.a.createElement(C.a,{xs:"3",md:"1"},o.a.createElement(S.a,{type:"submit",id:"btn1"},"Send"))))))))}}]),t}(o.a.Component),B=(n(50),n(51),n(52),n(15)),O=n.n(B),T=(n(101),function(){function e(){Object(i.a)(this,e),this.events={}}return Object(s.a)(e,[{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return this.events[e]&&this.events[e].forEach((function(e){return e.apply(void 0,n)})),this}},{key:"on",value:function(e,t){return this.events[e]?this.events[e].push(t):this.events[e]=[t],this}},{key:"off",value:function(e,t){if(e&&O.a.isFunction(t)){var n=this.events[e],a=n.findIndex((function(e){return e===t}));n.splice(a,1)}else this.events[e]=[];return this}}]),e}()),H=function(e){function t(){return Object(i.a)(this,t),Object(r.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"start",value:function(){var e=this;console.log("media device activated");return navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(t){e.stream=t,e.emit("stream",t)})).catch((function(e){e instanceof DOMException?alert("Cannot open webcam and/or microphone"):console.log(e)})),this}},{key:"toggle",value:function(e,t){var n=arguments.length;return this.stream&&this.stream["get".concat(e,"Tracks")]().forEach((function(e){var a=2===n?t:!e.enabled;O.a.set(e,"enabled",a)})),this}},{key:"stop",value:function(){return this.stream&&this.stream.getTracks().forEach((function(e){return e.stop()})),this}}]),t}(T),M=f()("/"),D={iceServers:[{urls:["stun:stun.l.google.com:19302"]}]},A=function(e){function t(e,n){var a;return Object(i.a)(this,t),a=Object(r.a)(this,Object(d.a)(t).call(this)),console.log("peer connection"),a.pc=new RTCPeerConnection(D),a.pc.onicecandidate=function(e){console.log("onicecandidate added"),M.emit("call",{to:a.friendID,candidate:e.candidate,id:a.myID})},a.pc.ontrack=function(e){return a.emit("peerStream",e.streams[0])},a.navigateDevice=new H,a.friendID=e,a.myID=n,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"start",value:function(e,t){var n=this;return this.navigateDevice.on("stream",(function(t){console.log("adding tracks"),t.getTracks().forEach((function(e){n.pc.addTrack(e,t)})),n.emit("localStream",t),e?(console.log("request sent"),M.emit("request",{to:n.friendID,id:n.myID})):(console.log("create offer start"),n.createOffer())})).start(t),this}},{key:"stop",value:function(e){return e&&M.emit("end",{to:this.friendID}),this.navigateDevice.stop(),this.pc.close(),this.pc=null,this.off(),this}},{key:"createOffer",value:function(){return console.log("create offer"),this.pc.createOffer().then(this.getDescription.bind(this)).catch((function(e){return console.log(e)})),this}},{key:"createAnswer",value:function(){return console.log("creating answer"),this.pc.createAnswer().then(this.getDescription.bind(this)).catch((function(e){return console.log(e)})),this}},{key:"getDescription",value:function(e){return console.log("set local description"),this.pc.setLocalDescription(e),console.log(this.friendID),M.emit("call",{to:this.friendID,sdp:e,id:this.myID}),this}},{key:"setRemoteDescription",value:function(e){console.log("remote description set");var t=new RTCSessionDescription(e);return this.pc.setRemoteDescription(t),this}},{key:"addIceCandidate",value:function(e){if(e){console.log("addicecandidate added");var t=new RTCIceCandidate(e);this.pc.addIceCandidate(t)}return this}}]),t}(T);var W=function(e){var t=e.startCall,n=e.clientId,a=e.opponent;return o.a.createElement("div",{className:" main-window"},o.a.createElement("div",{className:"callVideoButt "},o.a.createElement("button",{type:"button",className:" font btn-action fa fa-video-camera fa-2x",onClick:function(e,n,a){var o={audio:!0,video:e};return function(){console.log("i m returning"),n&&t(!0,n,o,a)}}(!0,a,n),id:"video"})))},P=n(5),Y=n.n(P),G=function(e,t){return Y()("btn-action fa ".concat(e),{disable:!t})};var R=function(e){var t=e.peerSrc,n=e.localSrc,l=e.config,c=e.mediaDevice,i=e.status,s=e.endCall,r=(e.sex,Object(a.useRef)(null)),d=Object(a.useRef)(null),m=Object(a.useState)(l.video),p=Object(u.a)(m,2),g=p[0],h=p[1],v=Object(a.useState)(l.audio),f=Object(u.a)(v,2),b=f[0],y=f[1];Object(a.useEffect)((function(){(console.log("i am here peer"),t)||(document.getElementById("peerVideo").style.backgroundColor="rgb(192,192,192,0.3)");r.current&&t&&(console.log(r.current),console.log("peer true"),r.current.srcObject=t),d.current&&n&&(console.log(d.current),console.log("peeer true"),d.current.srcObject=n)})),Object(a.useEffect)((function(){c&&(c.toggle("Video",g),c.toggle("Audio",b))}));var E=function(e){"video"===e&&(h(!g),c.toggle("Video")),"audio"===e&&(y(!b),c.toggle("Audio"))};return o.a.createElement("div",{className:Y()("call-window",i)},o.a.createElement("video",{id:"peerVideo",className:"videocall  col-lg-4 ml-2",ref:r,autoPlay:!0}),o.a.createElement("video",{id:"localVideo",className:"videocall  col-lg-4 ml-2",ref:d,autoPlay:!0}),o.a.createElement("div",{className:"video-control d-none d-md-block"},o.a.createElement("button",{key:"btnVideo",type:"button",className:G("fa-video-camera",g),onClick:function(){return E("video")},id:"btnvideo"}),o.a.createElement("button",{key:"btnAudio",type:"button",className:G("fa-microphone",b),onClick:function(){return E("audio")},id:"btnaudio"}),o.a.createElement("button",{type:"button",className:"btn-action hangup fa fa-phone",onClick:function(){return s(!0)},id:"btnend"})))};var F=function(e){var t=e.status,n=e.callFrom,a=e.startCall,l=e.rejectCall;return o.a.createElement("div",{className:Y()("call-modal",t)},o.a.createElement("button",{type:"button",className:"btn-action fa fa-video-camera",onClick:function(e){var t={audio:!0,video:e};return function(){return a(!1,n,t)}}(!0)}),o.a.createElement("button",{type:"button",className:"btn-action hangup fa fa-phone",onClick:l}))},L=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(r.a)(this,Object(d.a)(t).call(this,e))).initSocket=function(){var e=f()("/");document.getElementById("leave").setAttribute("disabled",!0),document.getElementById("search").setAttribute("disabled",!0),document.getElementById("video").setAttribute("disabled",!0),e.on("connect",(function(){function t(){document.getElementById("feedback").innerHTML=""}document.getElementById("comment").setAttribute("disabled",!0),document.getElementById("btn1").setAttribute("disabled",!0),console.log("connection made"),e.on("socketid",(function(t){console.log("myid"),console.log(t),n.setState({socketid:t}),n.setState({sex:n.props.gender});var a=n.state.socketid,o=n.state.sex;e.emit("mydetails",{socketid:a,sex:o})})),e.on("opponentdetails",(function(e){n.setState({opponent:e}),console.log(n.state.opponent)})),e.on("roomid",(function(t){document.getElementById("comment").removeAttribute("disabled",!0),document.getElementById("btn1").removeAttribute("disabled",!0),document.getElementById("leave").removeAttribute("disabled",!0),document.getElementById("video").removeAttribute("disabled",!0),document.getElementById("forImage").remove(),document.getElementById("connectText").remove(),n.setState({room:t});var a=n.state.opponent,o=n.state.room;e.emit("room",{room:o,opponent:a})})),e.on("typing",(function(e){var n=setTimeout(t,1e3),a=e;document.getElementById("feedback").innerHTML="<p><em>"+a+"<p><em>",clearTimeout(n),n=setTimeout(t,500)})),e.on("receiverMessage",(function(e){var t=document.getElementById("scrollable");if(console.log(e.message),console.log(e.opponent),e.opponent==n.state.socketid){console.log("inside",n.state.socketid),console.log(t.scrollHeight,t.clientHeight,t.scrollTop);var a=t.scrollHeight-t.clientHeight<=t.scrollTop+1;console.log(t.scrollHeight-t.clientHeight,t.scrollTop+1);var o=document.createElement("div"),l=document.createElement("div"),c=document.createElement("br");o.innerHTML=e.message,o.style.border="solid 0px pink",o.style.backgroundColor="pink",o.style.padding="10px",o.style.minWidth="50px",o.style.maxWidth="500px",o.style.wordBreak="break-all",o.style.borderRadius="20px",o.style.display="block",o.style.cssFloat="right",o.style.clear="right",l.style.marginTop="17px",l.style.padding="15px",l.appendChild(o),l.appendChild(c),t.appendChild(l),a&&(t.scrollTop=t.scrollHeight-t.clientHeight)}else{console.log("inside inside",n.state.socketid),console.log(t.scrollHeight,t.clientHeight,t.scrollTop);a=t.scrollHeight-t.clientHeight<=t.scrollTop+1;console.log(t.scrollHeight-t.clientHeight,t.scrollTop+1);o=document.createElement("div"),l=document.createElement("div"),c=document.createElement("br");o.innerHTML=e.message,o.style.border="solid 0px white",o.style.backgroundColor="white",o.style.padding="10px",o.style.minWidth="50px",o.style.maxWidth="500px",o.style.wordBreak="break-all",o.style.borderRadius="20px",o.style.display="block",o.style.cssFloat="left",o.style.clear="left",l.style.marginTop="17px",l.style.padding="15px",l.appendChild(o),l.appendChild(c),t.appendChild(l),a&&(t.scrollTop=t.scrollHeight-t.clientHeight)}})),e.on("leaveroomtoo",(function(){document.getElementById("comment").setAttribute("disabled",!0),document.getElementById("btn1").setAttribute("disabled",!0),document.getElementById("leave").setAttribute("disabled",!0),document.getElementById("video").setAttribute("disabled",!0),document.getElementById("search").removeAttribute("disabled",!0);var t=document.getElementById("mainMess"),a=document.getElementById("strangerDisconnect"),o=document.createElement("div");o.setAttribute("id","disconnectTextWarn");var l=document.createElement("P");l.innerText="You are disconnected!",o.style.display="flex",o.style.justifyContent="center",l.style.fontSize="x-large",l.style.opacity="0.8",l.style.color="white",l.style.fontStyle="italic",l.style.textShadow="2px 2px 4px #000000",o.appendChild(l),a.appendChild(o),t.appendChild(a);var c=n.state.room,i=n.state.opponent;e.emit("leaveroom",{room:c,opponent:i})})),e.on("request",(function(e){var t=e.from;console.log("call window activate"),n.setState({callModal:"active",callFrom:t})})).on("call",(function(e){console.log("i received data"),e.sdp?(console.log("ab"),n.pc.setRemoteDescription(e.sdp),"offer"===e.sdp.type&&n.pc.createAnswer()):(console.log("abc"),n.pc.addIceCandidate(e.candidate))})).on("end",n.endCall.bind(Object(h.a)(n),!1))})),n.setState({socket:e})},n.state={socket:null,opponent:"abc",room:"",socketid:"",sex:"",callWindow:"",callModal:"",callFrom:"",localSrc:null,peerSrc:null,message:"message"},n.pc={},n.config=null,n.startCallHandler=n.startCall.bind(Object(h.a)(n)),n.endCallHandler=n.endCall.bind(Object(h.a)(n)),n.rejectCallHandler=n.rejectCall.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.initSocket(),window.performance&&console.log("here window is working"),1==performance.navigation.type?(console.info("This page is reloaded"),window.location.href="/"):console.info("This page is not reloaded")}},{key:"startCall",value:function(e,t,n,a){var o=this;console.log("i am inside startCall"),console.log(t),console.log(a),console.log("start call"),this.config=n,this.pc=new A(t,a).on("localStream",(function(t){console.log("localstream");var n={callWindow:"active",localSrc:t};e||(n.callModal=""),o.setState(n)})).on("peerStream",(function(e){console.log("peerstream added"),o.setState({peerSrc:e})})).start(e,n)}},{key:"rejectCall",value:function(){var e=this.state.callFrom;this.state.socket.emit("end",{to:e}),this.setState({callModal:""})}},{key:"endCall",value:function(e){O.a.isFunction(this.pc.stop)&&this.pc.stop(e),this.pc={},this.config=null,this.setState({callWindow:"",callModal:"",localSrc:null,peerSrc:null})}},{key:"render",value:function(){var e=this.state,t=e.callFrom,n=e.callModal,a=e.callWindow,l=e.localSrc,c=e.peerSrc,i=this.state.socket;return console.log(this.state.socket),o.a.createElement("div",{className:"wholeContent"},o.a.createElement("div",{className:"row head",id:"frontHead"},o.a.createElement("div",{className:"col-8 col-md-10"},o.a.createElement(E,{socket:i,opponent:this.state.opponent,room:this.state.room,socketid:this.state.socketid,sex:this.state.sex,endCall:this.endCallHandler})),o.a.createElement("div",{className:"mainwindow col-4 col-md-2"},o.a.createElement(W,{clientId:this.state.socketid,opponent:this.state.opponent,startCall:this.startCallHandler}))),o.a.createElement("div",{className:"row mymess "},o.a.createElement("div",{className:"col-xs-12 col-lg-4 ",id:"videoWindow"},!O.a.isEmpty(this.config)&&o.a.createElement(R,{status:a,localSrc:l,peerSrc:c,config:this.config,mediaDevice:this.pc.mediaDevice,endCall:this.endCallHandler}),o.a.createElement("hr",{className:"videoSeperate"})),o.a.createElement("div",{id:"frontMessage",className:"col-xs-12 col-lg-8 "},o.a.createElement(I,{socket:i,message:this.state.message,opponent:this.state.opponent}))),o.a.createElement(F,{status:n,startCall:this.startCallHandler,rejectCall:this.rejectCallHandler,callFrom:t}))}}]),t}(o.a.Component),V=n(57),z=n.n(V);var q=function(e){var t=e.peerSrc,n=e.localSrc,l=e.config,c=e.mediaDevice,i=e.status,s=(e.endCall,e.sex,Object(a.useRef)(null)),r=Object(a.useRef)(null),d=Object(a.useState)(l.video),m=Object(u.a)(d,2),p=m[0],g=(m[1],Object(a.useState)(l.audio)),h=Object(u.a)(g,2),v=h[0];return h[1],Object(a.useEffect)((function(){(console.log("i am here peer"),t)||(document.getElementById("peerVideo").style.backgroundColor="rgb(192,192,192,0.3)");s.current&&t&&(console.log(s.current),console.log("peer true"),s.current.srcObject=t),r.current&&n&&(console.log(r.current),console.log("peeer true"),r.current.srcObject=n)})),Object(a.useEffect)((function(){c&&(c.toggle("Video",p),c.toggle("Audio",v))})),o.a.createElement("div",{className:Y()("call-window",i)},o.a.createElement("video",{id:"localVideo",className:"videocall",ref:r,autoPlay:!0}),o.a.createElement("video",{id:"peerVideo",className:"videocall",ref:s,autoPlay:!0}))},X=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(r.a)(this,Object(d.a)(t).call(this,e))).initSocket=function(){var e=f()("/");document.getElementById("leave").setAttribute("disabled",!0),document.getElementById("search").setAttribute("disabled",!0),e.on("connect",(function(){function t(){document.getElementById("feedback").innerHTML=""}document.getElementById("comment").setAttribute("disabled",!0),document.getElementById("btn1").setAttribute("disabled",!0),console.log("connection made"),e.on("socketid",(function(t){console.log("myid"),console.log(t),n.setState({socketid:t}),n.setState({sex:n.props.gender});var a=n.state.socketid,o=n.state.sex;e.emit("mydetails",{socketid:a,sex:o})})),e.on("opponentdetails",(function(e){n.setState({opponent:e}),console.log(n.state.opponent)})),e.on("forVideocall",(function(e){if(e){var t=n.state.opponent,a=n.state.socketid;n.startCall(!0,t,{audio:!0,video:!0},a)}})),e.on("roomid",(function(t){document.getElementById("comment").removeAttribute("disabled",!0),document.getElementById("btn1").removeAttribute("disabled",!0),document.getElementById("leave").removeAttribute("disabled",!0),document.getElementById("forImage").remove(),document.getElementById("connectText").remove(),n.setState({room:t});n.state.socketid;var a=n.state.opponent,o=n.state.room;e.emit("room",{room:o,opponent:a})})),e.on("typing",(function(e){var n=setTimeout(t,1e3),a=e;document.getElementById("feedback").innerHTML="<p><em>"+a+"<p><em>",clearTimeout(n),n=setTimeout(t,500)})),e.on("receiverMessage",(function(e){var t=document.getElementById("scrollable");if(console.log(e.message),console.log(e.opponent),e.opponent==n.state.socketid){console.log("inside",n.state.socketid),console.log(t.scrollHeight,t.clientHeight,t.scrollTop);var a=t.scrollHeight-t.clientHeight<=t.scrollTop+1;console.log(t.scrollHeight-t.clientHeight,t.scrollTop+1);var o=document.createElement("div"),l=document.createElement("div"),c=document.createElement("br");o.innerHTML=e.message,o.style.border="solid 0px pink",o.style.backgroundColor="pink",o.style.padding="10px",o.style.minWidth="50px",o.style.maxWidth="500px",o.style.wordBreak="break-all",o.style.borderRadius="20px",o.style.display="block",o.style.cssFloat="right",o.style.clear="right",l.style.marginTop="17px",l.style.padding="15px",l.appendChild(o),l.appendChild(c),t.appendChild(l),a&&(t.scrollTop=t.scrollHeight-t.clientHeight)}else{console.log("inside inside",n.state.socketid),console.log(t.scrollHeight,t.clientHeight,t.scrollTop);a=t.scrollHeight-t.clientHeight<=t.scrollTop+1;console.log(t.scrollHeight-t.clientHeight,t.scrollTop+1);o=document.createElement("div"),l=document.createElement("div"),c=document.createElement("br");o.innerHTML=e.message,o.style.border="solid 0px white",o.style.backgroundColor="white",o.style.padding="10px",o.style.minWidth="50px",o.style.maxWidth="500px",o.style.wordBreak="break-all",o.style.borderRadius="20px",o.style.display="block",o.style.cssFloat="left",o.style.clear="left",l.style.marginTop="17px",l.style.padding="15px",l.appendChild(o),l.appendChild(c),t.appendChild(l),a&&(t.scrollTop=t.scrollHeight-t.clientHeight)}})),e.on("leaveroomtoo",(function(){document.getElementById("comment").setAttribute("disabled",!0),document.getElementById("btn1").setAttribute("disabled",!0),document.getElementById("leave").setAttribute("disabled",!0),document.getElementById("search").removeAttribute("disabled",!0);var t=document.getElementById("mainMess"),a=document.getElementById("strangerDisconnect"),o=document.createElement("div");o.setAttribute("id","disconnectTextWarn");var l=document.createElement("P");l.innerText="You are disconnected!",o.style.display="flex",o.style.justifyContent="center",l.style.fontSize="xx-large",l.style.opacity="0.8",l.style.color="white",l.style.fontStyle="italic",l.style.textShadow="2px 2px 4px #000000",o.appendChild(l),a.appendChild(o),t.appendChild(a);var c=n.state.room,i=n.state.opponent;e.emit("leaveroom",{room:c,opponent:i})})),e.on("request",(function(e){var t=e.from;console.log("call window activate"),n.setState({callModal:"active",callFrom:t});var a=n.state.callFrom;console.log(t),n.startCall(!1,a,{audio:!0,video:!0})})).on("call",(function(e){console.log("i received data"),e.sdp?(console.log("ab"),n.pc.setRemoteDescription(e.sdp),"offer"===e.sdp.type&&n.pc.createAnswer()):(console.log("abc"),n.pc.addIceCandidate(e.candidate))})).on("end",n.endCall.bind(Object(h.a)(n),!1))})),n.setState({socket:e})},n.state={socket:null,opponent:"abc",room:"",socketid:"",sex:"",callWindow:"",callModal:"",callFrom:"",localSrc:null,peerSrc:null,message:"message"},n.pc={},n.config=null,n.startCallHandler=n.startCall.bind(Object(h.a)(n)),n.endCallHandler=n.endCall.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.initSocket(),window.performance&&console.log("here window is working"),1==performance.navigation.type?(console.info("This page is reloaded"),window.location.href="/"):console.info("This page is not reloaded")}},{key:"startCall",value:function(e,t,n,a){var o=this;console.log("i am inside startCall"),console.log(t),console.log(a),console.log("start call"),this.config=n,this.pc=new A(t,a).on("localStream",(function(t){console.log("localstream");var n={callWindow:"active",localSrc:t};e||(n.callModal=""),o.setState(n)})).on("peerStream",(function(e){console.log("peerstream added"),o.setState({peerSrc:e})})).start(e,n)}},{key:"endCall",value:function(e){O.a.isFunction(this.pc.stop)&&this.pc.stop(e),this.pc={},this.config=null,this.setState({callWindow:"",callModal:"",localSrc:null,peerSrc:null})}},{key:"render",value:function(){var e=this.state,t=e.callWindow,n=e.localSrc,a=e.peerSrc,l=this.state.socket;return console.log(this.state.socket),o.a.createElement("div",{className:"wholeContent"},o.a.createElement("div",{className:"row head",id:"frontHead"},o.a.createElement("div",{className:"col-10 col-md-10"},o.a.createElement(E,{socket:l,opponent:this.state.opponent,room:this.state.room,socketid:this.state.socketid,sex:this.state.sex,endCall:this.endCallHandler})),o.a.createElement("div",{className:"mainwindow col-2 col-md-2"})),o.a.createElement("div",{className:"row mymess"},o.a.createElement("div",{className:"col-xs-12 col-lg-4 ",id:"videoWindow"},!O.a.isEmpty(this.config)&&o.a.createElement(q,{status:t,localSrc:n,peerSrc:a,config:this.config,mediaDevice:this.pc.mediaDevice}),o.a.createElement("hr",{className:"videoSeperate"})),o.a.createElement("div",{id:"frontMessage",className:"col-xs-12 col-lg-8 "},o.a.createElement(I,{socket:l,message:this.state.message,opponent:this.state.opponent}))))}}]),t}(o.a.Component);function Z(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],l=t[1],c=Object(p.f)(),i=c.state&&c.state.background;return o.a.createElement("div",null,o.a.createElement(p.c,{location:i||c},o.a.createElement(p.a,{exact:!0,path:"/",children:o.a.createElement((function(){var e=function(e){var t=document.getElementById("maleButton").value;console.log(t),l(t)},t=function(e){var t=document.getElementById("femaleButton").value;l(t)},n=function(e){var t=document.getElementById("publicButton").value;l(t)};return o.a.createElement("div",{className:"frontContainer"},o.a.createElement("div",{className:"frontPageHeader"}),o.a.createElement("div",{className:" backgroundMainDiv row"},o.a.createElement("div",{className:"col-xs-12 offset-1 leftMainDivMobile d-block d-sm-none",style:{height:"70vh",width:"100vw"}},o.a.createElement("div",{className:"col-xs-12 headYourGenderMobile mt-5"},o.a.createElement("p",{className:"paraYourGenderMobile  ml-3"},"Whats Your Gender?")),o.a.createElement("div",{className:"row genderDiv offset-3 "},o.a.createElement("div",{className:"col-xs-5"},o.a.createElement(g.b,{to:"/layout"},o.a.createElement("button",{type:"button",className:" butn-actionMobile fa fa-mars fa-2x   ",id:"maleButton",value:"male",onClick:e}))),o.a.createElement("div",{className:"col-xs-5"},o.a.createElement(g.b,{to:"/layout"},o.a.createElement("button",{type:"button",className:" butn-actionMobile fa fa-venus fa-2x ml-5",id:"femaleButton",value:"female",onClick:t}))),o.a.createElement("div",{className:"col-xs-5  textGenderDiv",id:"maleText"},o.a.createElement("p",{className:"pl-2 paraGender "}," Male")),o.a.createElement("div",{className:"col-xs-5 textGenderDiv offset-1"},o.a.createElement("p",{className:"pl-5 paraGender "},"Female"))),o.a.createElement("div",{className:"col-12 YourGenderLeftBottomMobile mt-5"},o.a.createElement("p",{className:"paraYourGenderLeftBottomMobile "},"Find people nearby you by entering into the Public chat")),o.a.createElement("div",{className:"divPublicButtonMobile"},o.a.createElement(g.b,{to:"/public"},o.a.createElement(S.a,{id:"publicButton",color:"danger",size:"lg",value:"public",onClick:n},"Public Chat")))),o.a.createElement("div",{className:"col-xs-12 ml-5 col-md-3 leftMainDiv d-none d-sm-block"},o.a.createElement("div",{className:"col-12 headYourGender"},o.a.createElement("p",{className:"paraYourGenderLeft"},"Public Chat!")),o.a.createElement("div",{className:"divPublicButton"},o.a.createElement(g.b,{to:"/public"},o.a.createElement(S.a,{id:"publicButton",color:"danger",size:"lg",value:"public",onClick:n},"Public Chat"))),o.a.createElement("div",{className:"col-12 "},o.a.createElement("p",{className:"paraYourGenderLeftBottom mt-5"},"Click on the button to enter into public chat"))),o.a.createElement("div",{className:"col-xs-12 ml-5 mt-1 col-md-7 mainGenDiv d-none d-sm-block",style:{background:"url('".concat(z.a,"') no-repeat"),backgroundSize:"cover",boxShadow:"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"}},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-12 headYourGender mt-5"},o.a.createElement("p",{className:"paraYourGender"},"Private Chat!")),o.a.createElement("div",{className:"col-md-12 headYourGender"},o.a.createElement("p",{className:"paraYourGender"},"Whats Your Gender?")),o.a.createElement("div",{className:"row genderDiv offset-1 "},o.a.createElement("div",{className:"col-md-5"},o.a.createElement(g.b,{to:"/layout"},o.a.createElement("button",{type:"button",className:" butn-action fa fa-mars fa-4x  mt-1 ",id:"maleButton",value:"male",onClick:e}))),o.a.createElement("div",{className:"col-md-5"},o.a.createElement(g.b,{to:"/layout"},o.a.createElement("button",{type:"button",className:" butn-action fa fa-venus fa-4x ml-5 mt-1",id:"femaleButton",value:"female",onClick:t}))),o.a.createElement("div",{className:"col-md-5  textGenderDiv",id:"maleText"},o.a.createElement("p",{className:"pr-4 paraGender "}," Male")),o.a.createElement("div",{className:"col-md-5 textGenderDiv offset-1"},o.a.createElement("p",{className:"pl-3 paraGender "},"Female")))))),o.a.createElement("div",{className:"lowerDivMobile d-block d-sm-none"},o.a.createElement("p",{className:"footParaMobile"},"XYZ is a fun random match making website where  you will pair up with completely random person from anywhere. Its one of the cool way to met new strangers around you. To keep your privacy protective xyz never share any of your details to anyone. You can make a private chat with stranger after you connected to the stranger you can text or even video call with the stranger and you can stop a chat at any time just by clicking on the cancel button you can again search for the stranger just by clicking on the next button. In private chat you can videocall by sending videocall request and can even accept or reject stranger videocall request. In private chat a random male is connected with a random female.The Public feature of XYZ randomly matches you with any gender from anywhere around you.The people matches with you is completely random so be nice with people. XYZ donot encourage nudity, sexually harass anyone, publicize other peoples, sharing private information, doing illegal activities. Be carefull from scammers, exploiters.  ")),o.a.createElement("div",{className:"row lowerDiv d-none d-sm-block"},o.a.createElement("div",{className:"col-md-12"},o.a.createElement("p",{className:"footPara"},"XYZ is a fun random match making website where  you will pair up with completely random person from anywhere. Its one of the cool way to met new strangers around you. To keep your privacy protective xyz never share any of your details to anyone. You can make a private chat with stranger after you connected to the stranger you can text or even video call with the stranger and you can stop a chat at any time just by clicking on the cancel button you can again search for the stranger just by clicking on the next button. In private chat you can videocall by sending videocall request and can even accept or reject stranger videocall request. In private chat a random male is connected with a random female. "),o.a.createElement("p",{className:"footPara"},"The Public feature of XYZ randomly matches you with any gender from anywhere around you.The people matches with you is completely random so be nice with people. XYZ donot encourage nudity, sexually harass anyone, publicize other peoples, sharing private information, doing illegal activities. Be carefull from scammers, exploiters. "))))}),null)}),o.a.createElement(p.a,{path:"/layout",children:o.a.createElement(L,{gender:n})}),o.a.createElement(p.a,{path:"/public",children:o.a.createElement(X,{gender:n})})))}var U=function(e){function t(){return Object(i.a)(this,t),Object(r.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement(g.a,null,o.a.createElement(Z,null))}}]),t}(o.a.Component),J=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function K(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(104),n(105);c.a.render(o.a.createElement(U,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");J?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):K(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):K(t,e)}))}}()},25:function(e,t,n){},26:function(e,t,n){e.exports=n.p+"static/media/support.7daebf03.png"},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},57:function(e,t,n){e.exports=n.p+"static/media/notebook.e9721755.jpg"},61:function(e,t,n){e.exports=n(106)},66:function(e,t,n){},67:function(e,t,n){},95:function(e,t){}},[[61,1,2]]]);
//# sourceMappingURL=main.a40827c9.chunk.js.map